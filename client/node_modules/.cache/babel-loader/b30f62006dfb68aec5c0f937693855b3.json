{"ast":null,"code":"import _defineProperty from \"/Users/adamsarli/Coding/student-agendas-fullstack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/adamsarli/Coding/student-agendas-fullstack/client/src/components/progressions/NewProgressionContainer.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport YouTubeSearchContainer from '../videos/youtube/YouTubeSearchContainer';\nimport VimeoSearchContainer from '../videos/vimeo/VimeoSearchContainer';\nimport NewProgressionMenuBar from './NewProgressionMenuBar';\nimport NewProgression from './NewProgression';\nimport DisplayPreview from '../videos/DisplayPreview';\nimport NewReflection from '../reflections/NewReflection';\nimport './Progression.css';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport { connect } from 'react-redux';\nimport { addProgression, editProgression } from '../../actions/progressionActions';\nimport { addFlashMessage } from '../../actions/flashActions';\n\nclass NewProgressionContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      id: undefined,\n      name: \"\",\n      color: \"blue\",\n      currProgression: [],\n      menuSelect: \"Add YouTube Video\",\n      selectedIndex: \"\"\n    };\n\n    this.loadProgressionIntoState = () => {\n      const _this$props = this.props,\n            videos = _this$props.videos,\n            reflections = _this$props.reflections,\n            progressions = _this$props.progressions,\n            match = _this$props.match;\n      const progId = match.params.id;\n\n      if (progId && progId !== \"new\" && !this.state.id && videos.allIds.length > 0 && reflections.allIds.length > 0 && progressions.allIds.length > 0) {\n        const progression = progressions.byId[\"progression\".concat(progId)];\n        const progressionItems = progression.items.map(videoOrReflectionId => videoOrReflectionId.includes(\"video\") ? videos.byId[videoOrReflectionId] : reflections.byId[videoOrReflectionId]);\n        this.setState(_objectSpread({}, this.state, {\n          currProgression: [...progressionItems],\n          name: progression.name,\n          id: progression.id,\n          color: progression.color\n        }));\n      }\n    };\n\n    this.onNameInputChange = event => {\n      this.setState(_objectSpread({}, this.state, {\n        name: event.target.value,\n        currProgression: [...this.state.currProgression]\n      }));\n    };\n\n    this.handleFormSubmit = event => {\n      const _this$props2 = this.props,\n            addProgression = _this$props2.addProgression,\n            editProgression = _this$props2.editProgression,\n            history = _this$props2.history,\n            addFlashMessage = _this$props2.addFlashMessage;\n      event.preventDefault();\n      const progression = {\n        progression: {\n          id: this.state.id,\n          name: this.state.name,\n          color: this.state.color,\n          items_attributes: [...this.state.currProgression]\n        }\n      };\n      const reflectionExists = progression.progression.items_attributes.find(item => item.question1);\n\n      if (reflectionExists) {\n        !this.state.id ? addProgression(progression, history) : editProgression(progression, history);\n      } else {\n        addFlashMessage(\"Your progression must contain one reflection\");\n      }\n    };\n\n    this.handleDragOver = event => {\n      event.preventDefault();\n      document.querySelector('.progression').classList.add(\"drag-over-progression\");\n    };\n\n    this.handleDragLeave = event => {\n      event.preventDefault();\n      document.querySelector('.progression').classList.remove(\"drag-over-progression\");\n    };\n\n    this.handleDragStart = (event, video) => {\n      let data = JSON.stringify(video);\n      event.dataTransfer.setData(\"video\", data);\n    };\n\n    this.handleOnDrop = event => {\n      let video = event.dataTransfer.getData(\"video\");\n      video = JSON.parse(video);\n      this.addToProgression(event, video);\n      document.querySelector('.progression').classList.remove(\"drag-over-progression\");\n    };\n\n    this.addToProgression = (e, item) => {\n      e.preventDefault(); // if it's a video\n\n      const addFlashMessage = this.props.addFlashMessage;\n\n      if (item.videoId) {\n        const any = this.state.currProgression.find(vid => vid.videoId === item.videoId);\n\n        if (!any) {\n          this.setState(_objectSpread({}, this.state, {\n            currProgression: [...this.state.currProgression, item]\n          }));\n        } else {\n          addFlashMessage(\"Your progression already contains this video\");\n        } // if it's a reflection\n\n      } else {\n        if (this.containsReflection()) {\n          addFlashMessage(\"A progression can only contain one reflection\");\n          this.setState(_objectSpread({}, this.state, {\n            menuSelect: ''\n          }));\n        } else {\n          this.setState(_objectSpread({}, this.state, {\n            menuSelect: '',\n            currProgression: [...this.state.currProgression, item]\n          }));\n        }\n      }\n    };\n\n    this.editReflectionItem = item => {\n      const editedProgression = [...this.state.currProgression];\n      editedProgression[this.state.selectedIndex] = item;\n      this.setState(_objectSpread({}, this.state, {\n        currProgression: editedProgression,\n        menuSelect: ''\n      }));\n    };\n\n    this.handleProgressionItemClick = index => {\n      const currProgression = this.state.currProgression;\n      this.setState(_objectSpread({}, this.state, {\n        currProgression: [...currProgression],\n        selectedIndex: index,\n        menuSelect: \"Edit Progression\"\n      }));\n    };\n\n    this.handleMenuClick = event => {\n      const addFlashMessage = this.props.addFlashMessage;\n      const selectedTab = event.target.innerText;\n      const index = selectedTab === \"Edit Progression\" && this.state.currProgression.length > 0 ? 0 : \"\";\n\n      if (selectedTab === \"Add Reflection\" && this.containsReflection()) {\n        addFlashMessage(\"Your progression already has a reflection (currently limited to one)\");\n      } else {\n        this.setState(_objectSpread({}, this.state, {\n          selectedIndex: index,\n          currProgression: [...this.state.currProgression],\n          menuSelect: event.target.innerText\n        }));\n      }\n    };\n\n    this.removeFromProgression = movie => {\n      this.setState(_objectSpread({}, this.state, {\n        currProgression: this.state.currProgression.filter(item => item !== movie),\n        menuSelect: \"Add YouTube Video\",\n        selectedIndex: \"\"\n      }));\n    };\n\n    this.progressionEmpty = () => {\n      return this.state.currProgression.length > 0 ? false : true;\n    };\n\n    this.handleDNDDragStart = attributes => {\n      const draggableId = attributes.draggableId;\n      document.querySelector(\"#item-\".concat(draggableId)).classList.add(\"item-dragging\");\n    };\n\n    this.handleDNDDragEnd = result => {\n      const destination = result.destination,\n            source = result.source,\n            draggableId = result.draggableId;\n      document.querySelector(\"#item-\".concat(draggableId)).classList.remove(\"item-dragging\");\n\n      if (!destination) {\n        return;\n      }\n\n      if (destination.index !== source.index) {\n        const testArray = [...this.state.currProgression];\n        testArray.splice(source.index, 1);\n        testArray.splice(destination.index, 0, this.state.currProgression[source.index]);\n        this.setState(_objectSpread({}, this.state, {\n          currProgression: testArray\n        }));\n      }\n    };\n\n    this.renderForm = () => {\n      return React.createElement(\"form\", {\n        className: \"create-progression-form\",\n        onSubmit: this.handleFormSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"new-progression-title \".concat(this.state.color, \"-title\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        required: true,\n        placeholder: \"Enter a title for this progression\",\n        value: this.state.name,\n        onChange: this.onNameInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"color-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"select-color red-title\",\n        onClick: event => this.handleColorClick(\"red\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"select-color orange-title\",\n        onClick: event => this.handleColorClick(\"orange\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"select-color green-title\",\n        onClick: event => this.handleColorClick(\"green\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"select-color blue-title\",\n        onClick: event => this.handleColorClick(\"blue\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"select-color purple-title\",\n        onClick: event => this.handleColorClick(\"purple\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"save progression\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }));\n    };\n\n    this.handleColorClick = color => {\n      this.setState(_objectSpread({}, this.state, {\n        currProgression: [...this.state.currProgression],\n        color: color\n      }));\n    };\n\n    this.renderProgressionTemplate = () => {\n      return React.createElement(DragDropContext, {\n        onDragEnd: this.handleDNDDragEnd,\n        onDragStart: this.handleDNDDragStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(Droppable, {\n        droppableId: \"droppable-1\",\n        direction: \"horizontal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, provided => React.createElement(NewProgression, Object.assign({\n        placeholder: provided.placeholder,\n        color: this.state.color,\n        innerRef: provided.innerRef\n      }, provided.droppableProps, {\n        removeFromProgression: this.removeFromProgression,\n        currProgression: this.state.currProgression,\n        handleProgressionItemClick: this.handleProgressionItemClick,\n        handleDragOver: this.handleDragOver,\n        handleDragLeave: this.handleDragLeave,\n        handleOnDrop: this.handleOnDrop,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }), provided.placeholder)));\n    };\n\n    this.renderAddingItemsTemplate = () => {\n      const _this$state = this.state,\n            selectedIndex = _this$state.selectedIndex,\n            currProgression = _this$state.currProgression;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, React.createElement(NewProgressionMenuBar, {\n        handleMenuClick: this.handleMenuClick,\n        menuSelect: this.state.menuSelect,\n        progressionEmpty: this.progressionEmpty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }), this.state.menuSelect === \"Edit Progression\" && selectedIndex !== '' && currProgression[selectedIndex].videoId ? React.createElement(DisplayPreview, {\n        video: currProgression[selectedIndex],\n        removeFromProgression: this.removeFromProgression,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }) : '', this.state.menuSelect === \"Edit Progression\" && selectedIndex !== '' && currProgression[selectedIndex].question1 ? React.createElement(NewReflection, {\n        key: selectedIndex,\n        reflection: currProgression[selectedIndex],\n        addToProgression: this.addToProgression,\n        editReflectionItem: this.editReflectionItem,\n        handleDragStart: this.handleDragStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270\n        },\n        __self: this\n      }) : '', this.state.menuSelect === \"Add YouTube Video\" ? React.createElement(VideoSearchContainer, {\n        addToProgression: this.addToProgression,\n        handleDragStart: this.handleDragStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        },\n        __self: this\n      }) : '', this.state.menuSelect === \"Add Vimeo Video\" ? React.createElement(VimeoSearchContainer, {\n        addToProgression: this.addToProgression,\n        handleDragStart: this.handleDragStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        },\n        __self: this\n      }) : '', this.state.menuSelect === \"Add Reflection\" ? React.createElement(NewReflection, {\n        reflection: \"\",\n        addToProgression: this.addToProgression,\n        editReflectionItem: this.editReflectionItem,\n        handleDragStart: this.handleDragStart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }) : '');\n    };\n\n    this.containsReflection = () => {\n      const currProgression = this.state.currProgression;\n      return !!currProgression.find(item => item.question1);\n    };\n  }\n\n  componentDidMount() {\n    this.loadProgressionIntoState();\n  }\n\n  componentDidUpdate() {\n    this.loadProgressionIntoState();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"new-progression-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, this.renderForm(), this.renderProgressionTemplate(), this.renderAddingItemsTemplate());\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    progressions: state.progressions,\n    videos: state.videos,\n    reflections: state.reflections\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    addProgression: (progression, history) => dispatch(addProgression(progression, history)),\n    editProgression: (progression, history) => dispatch(editProgression(progression, history)),\n    addFlashMessage: message => dispatch(addFlashMessage(message))\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewProgressionContainer);","map":{"version":3,"sources":["/Users/adamsarli/Coding/student-agendas-fullstack/client/src/components/progressions/NewProgressionContainer.js"],"names":["React","Component","YouTubeSearchContainer","VimeoSearchContainer","NewProgressionMenuBar","NewProgression","DisplayPreview","NewReflection","DragDropContext","Droppable","connect","addProgression","editProgression","addFlashMessage","NewProgressionContainer","state","id","undefined","name","color","currProgression","menuSelect","selectedIndex","loadProgressionIntoState","props","videos","reflections","progressions","match","progId","params","allIds","length","progression","byId","progressionItems","items","map","videoOrReflectionId","includes","setState","onNameInputChange","event","target","value","handleFormSubmit","history","preventDefault","items_attributes","reflectionExists","find","item","question1","handleDragOver","document","querySelector","classList","add","handleDragLeave","remove","handleDragStart","video","data","JSON","stringify","dataTransfer","setData","handleOnDrop","getData","parse","addToProgression","e","videoId","any","vid","containsReflection","editReflectionItem","editedProgression","handleProgressionItemClick","index","handleMenuClick","selectedTab","innerText","removeFromProgression","movie","filter","progressionEmpty","handleDNDDragStart","attributes","draggableId","handleDNDDragEnd","result","destination","source","testArray","splice","renderForm","handleColorClick","renderProgressionTemplate","provided","placeholder","innerRef","droppableProps","renderAddingItemsTemplate","componentDidMount","componentDidUpdate","render","mapStateToProps","mapDispatchToProps","dispatch","message"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport YouTubeSearchContainer from '../videos/youtube/YouTubeSearchContainer'\nimport VimeoSearchContainer from '../videos/vimeo/VimeoSearchContainer'\nimport NewProgressionMenuBar from './NewProgressionMenuBar'\nimport NewProgression from './NewProgression'\nimport DisplayPreview from '../videos/DisplayPreview'\nimport NewReflection from '../reflections/NewReflection'\nimport './Progression.css';\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\nimport { connect } from 'react-redux'\nimport { addProgression, editProgression } from '../../actions/progressionActions'\nimport { addFlashMessage } from '../../actions/flashActions'\n\nclass NewProgressionContainer extends Component {\n  state = {\n    id: undefined,\n    name: \"\",\n    color: \"blue\",\n    currProgression: [],\n    menuSelect: \"Add YouTube Video\",\n    selectedIndex: \"\"\n  }\n\n  loadProgressionIntoState = () => {\n    const { videos, reflections, progressions, match } = this.props\n    const progId = match.params.id\n    if (progId && progId !== \"new\" && !this.state.id && videos.allIds.length > 0 && reflections.allIds.length > 0 && progressions.allIds.length > 0) {\n      const progression = progressions.byId[`progression${progId}`]\n      const progressionItems = progression.items.map(videoOrReflectionId => (\n        videoOrReflectionId.includes(\"video\") ? videos.byId[videoOrReflectionId] : reflections.byId[videoOrReflectionId]\n      ))\n\n      this.setState({\n        ...this.state,\n        currProgression: [...progressionItems],\n        name: progression.name,\n        id: progression.id,\n        color: progression.color\n      })\n\n    }\n  }\n\n  componentDidMount(){\n    this.loadProgressionIntoState()\n  }\n\n  componentDidUpdate(){\n    this.loadProgressionIntoState()\n  }\n\n  onNameInputChange = event => {\n    this.setState({\n      ...this.state,\n      name: event.target.value,\n      currProgression: [...this.state.currProgression]\n    })\n  }\n\n  handleFormSubmit = (event) => {\n    const { addProgression, editProgression, history, addFlashMessage } = this.props\n    event.preventDefault()\n    const progression = {\n      progression: {\n        id: this.state.id,\n        name: this.state.name,\n        color: this.state.color,\n        items_attributes: [...this.state.currProgression]\n      }\n    }\n    const reflectionExists = progression.progression.items_attributes.find(item => item.question1)\n    if (reflectionExists){\n      !this.state.id ? addProgression(progression, history) : editProgression(progression, history)\n    } else {\n      addFlashMessage(\"Your progression must contain one reflection\")\n    }\n  }\n\n  handleDragOver = event => {\n    event.preventDefault()\n    document.querySelector('.progression').classList.add(\"drag-over-progression\")\n  }\n\n  handleDragLeave = event => {\n    event.preventDefault()\n    document.querySelector('.progression').classList.remove(\"drag-over-progression\")\n  }\n\n  handleDragStart = (event, video) => {\n    let data = JSON.stringify(video)\n    event.dataTransfer.setData(\"video\", data)\n  }\n\n  handleOnDrop = (event) => {\n    let video = event.dataTransfer.getData(\"video\")\n    video = JSON.parse(video)\n    this.addToProgression(event, video)\n    document.querySelector('.progression').classList.remove(\"drag-over-progression\")\n  }\n\n  addToProgression = (e, item) => {\n    e.preventDefault()\n    // if it's a video\n    const { addFlashMessage } = this.props\n    if (item.videoId) {\n      const any = this.state.currProgression.find(vid => vid.videoId === item.videoId)\n      if (!any) {\n        this.setState({\n          ...this.state,\n          currProgression: [...this.state.currProgression, item]\n        })\n      } else {\n        addFlashMessage(\"Your progression already contains this video\")\n      }\n    // if it's a reflection\n    } else {\n      if (this.containsReflection()) {\n        addFlashMessage(\"A progression can only contain one reflection\")\n        this.setState({\n          ...this.state,\n          menuSelect: ''\n        })\n      } else {\n        this.setState({\n          ...this.state,\n          menuSelect: '',\n          currProgression: [...this.state.currProgression, item]\n        })\n      }\n    }\n  }\n\n  editReflectionItem = (item) => {\n    const editedProgression = [...this.state.currProgression]\n    editedProgression[this.state.selectedIndex] = item\n    this.setState({\n      ...this.state,\n      currProgression: editedProgression,\n      menuSelect: ''\n    })\n  }\n\n  handleProgressionItemClick = index => {\n    const { currProgression } = this.state\n    this.setState({\n      ...this.state,\n      currProgression: [...currProgression],\n      selectedIndex: index,\n      menuSelect: \"Edit Progression\"\n    })\n  }\n\n  handleMenuClick = (event) => {\n    const { addFlashMessage } = this.props\n    const selectedTab = event.target.innerText\n    const index = selectedTab === \"Edit Progression\" && this.state.currProgression.length > 0 ? 0 : \"\"\n\n    if (selectedTab === \"Add Reflection\" && this.containsReflection()){\n      addFlashMessage(\"Your progression already has a reflection (currently limited to one)\")\n    } else {\n      this.setState({\n        ...this.state,\n        selectedIndex: index,\n        currProgression: [...this.state.currProgression],\n        menuSelect: event.target.innerText\n      })\n    }\n  }\n\n  removeFromProgression = (movie) => {\n    this.setState({\n      ...this.state,\n      currProgression: this.state.currProgression.filter(item => item !== movie),\n      menuSelect: \"Add YouTube Video\",\n      selectedIndex: \"\"\n    })\n  }\n\n  progressionEmpty = () => {\n    return this.state.currProgression.length > 0 ? false : true\n  }\n\n  handleDNDDragStart = attributes => {\n    const {draggableId} = attributes\n    document.querySelector(`#item-${draggableId}`).classList.add(\"item-dragging\")\n  }\n\n  handleDNDDragEnd = result => {\n    const { destination, source, draggableId } = result\n    document.querySelector(`#item-${draggableId}`).classList.remove(\"item-dragging\")\n    if (!destination) {\n      return\n    }\n\n    if (destination.index !== source.index) {\n      const testArray = [...this.state.currProgression]\n      testArray.splice(source.index, 1)\n      testArray.splice(destination.index, 0, this.state.currProgression[source.index])\n      this.setState({\n        ...this.state,\n        currProgression: testArray\n      })\n    }\n\n  }\n\n  renderForm = () => {\n    return (\n      <form className=\"create-progression-form\" onSubmit={this.handleFormSubmit}>\n        <div className={`new-progression-title ${this.state.color}-title`}>\n          <input type=\"text\"\n            required\n            placeholder=\"Enter a title for this progression\"\n            value={this.state.name}\n            onChange={this.onNameInputChange}/>\n        </div>\n        <div className=\"color-container\">\n          <div className=\"select-color red-title\" onClick={event => this.handleColorClick(\"red\")}></div>\n          <div className=\"select-color orange-title\" onClick={event => this.handleColorClick(\"orange\")}></div>\n          <div className=\"select-color green-title\" onClick={event => this.handleColorClick(\"green\")}></div>\n          <div className=\"select-color blue-title\" onClick={event => this.handleColorClick(\"blue\")}></div>\n          <div className=\"select-color purple-title\" onClick={event => this.handleColorClick(\"purple\")}></div>\n        </div>\n        <input type=\"submit\" value=\"save progression\" />\n      </form>\n    )\n  }\n\n  handleColorClick = (color) => {\n    this.setState({\n      ...this.state,\n      currProgression: [...this.state.currProgression],\n      color: color\n    })\n  }\n\n  renderProgressionTemplate = () => {\n    return (\n      <DragDropContext\n        onDragEnd={this.handleDNDDragEnd}\n        onDragStart={this.handleDNDDragStart}\n        >\n        <Droppable droppableId=\"droppable-1\" direction=\"horizontal\">\n          {(provided) => (\n            <NewProgression\n              placeholder={provided.placeholder}\n              color={this.state.color}\n              innerRef={provided.innerRef}\n              {...provided.droppableProps}\n              removeFromProgression={this.removeFromProgression}\n              currProgression={this.state.currProgression}\n              handleProgressionItemClick={this.handleProgressionItemClick}\n              handleDragOver={this.handleDragOver}\n              handleDragLeave={this.handleDragLeave}\n              handleOnDrop={this.handleOnDrop} >\n                {provided.placeholder}\n            </NewProgression>\n          )}\n        </Droppable>\n      </DragDropContext>\n    )\n  }\n\n  renderAddingItemsTemplate = () => {\n    const {selectedIndex, currProgression} = this.state\n    return (\n      <div>\n        <NewProgressionMenuBar handleMenuClick={this.handleMenuClick} menuSelect={this.state.menuSelect} progressionEmpty={this.progressionEmpty}/>\n        {this.state.menuSelect === \"Edit Progression\" && selectedIndex !== '' && currProgression[selectedIndex].videoId ? <DisplayPreview video={currProgression[selectedIndex]} removeFromProgression={this.removeFromProgression}/> : ''}\n        {this.state.menuSelect === \"Edit Progression\" && selectedIndex !== '' && currProgression[selectedIndex].question1 ? <NewReflection key={selectedIndex} reflection={currProgression[selectedIndex]} addToProgression={this.addToProgression} editReflectionItem={this.editReflectionItem} handleDragStart={this.handleDragStart} /> : ''}\n        {this.state.menuSelect === \"Add YouTube Video\" ? <VideoSearchContainer addToProgression={this.addToProgression} handleDragStart={this.handleDragStart} /> : ''}\n        {this.state.menuSelect === \"Add Vimeo Video\" ? <VimeoSearchContainer addToProgression={this.addToProgression} handleDragStart={this.handleDragStart} /> : ''}\n        {this.state.menuSelect === \"Add Reflection\" ? <NewReflection reflection='' addToProgression={this.addToProgression} editReflectionItem={this.editReflectionItem} handleDragStart={this.handleDragStart} /> : ''}\n      </div>\n    )\n  }\n\n  containsReflection = () => {\n    const { currProgression } = this.state\n    return !!currProgression.find(item => item.question1)\n  }\n\n  render(){\n    return (\n      <div className=\"new-progression-container\">\n        {this.renderForm()}\n        {this.renderProgressionTemplate()}\n        {this.renderAddingItemsTemplate()}\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state){\n  return {\n    progressions: state.progressions,\n    videos: state.videos,\n    reflections: state.reflections\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return {\n    addProgression: (progression, history) => dispatch(addProgression(progression, history)),\n    editProgression: (progression, history) => dispatch(editProgression(progression, history)),\n    addFlashMessage: (message) => dispatch(addFlashMessage(message))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewProgressionContainer)\n"]},"metadata":{},"sourceType":"module"}